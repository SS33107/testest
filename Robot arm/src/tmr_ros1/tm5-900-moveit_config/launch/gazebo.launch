<?xml version="1.0"?>
<launch>
  <arg name="paused" default="false"/>
  <arg name="gazebo_gui" default="true"/>
  <arg name="stl_mesh" default="true"/>
  <arg name="prefix" default="" />
  <arg name="model" default="tm5-900" />
  <arg name="color" default="Gazebo/Grey" />
  <arg name="ns" default="" />
  <!-- startup simulated world -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <!-- <arg name="world_name" default="worlds/empty.world"/> -->
    <arg name="world_name" default="/home/ss/s/tool/techman/src/tmr_ros1/world/table.world"/>
    <arg name="paused" value="$(arg paused)"/>
    <arg name="gui" value="$(arg gazebo_gui)"/>
  </include>

  <!-- send robot urdf to param server -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find tm_description)/xacro/$(arg model).urdf.xacro' ns:=$(arg ns) prefix:=$(arg prefix) color:=$(arg color)" />

  <!-- push robot_description to factory and spawn robot in gazebo at the origin, change x,y,z arguments to spawn in a different position -->
  <node name="spawn_gazebo_model" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen" args="-urdf -model robot -param robot_description -x 0 -y 0 -z 0.0
    -J shoulder_1_joint 0.0
    -J shoulder_2_joint 0.0
    -J elbow_joint 0.0
    -J wrist_1_joint 0.0
    -J wrist_2_joint 0.0
    -J wrist_3_joint 0.0
    -J force_torque_sensor_joint 0.0" />
  <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" output="screen">
    <param name="publish_frequency" type="double" value="50.0" />
  </node>
  <!-- joint_state_controller -->
  <rosparam file="$(find tm5-900-moveit_config)/config/joint_state_controller.yaml" command="load"/>
  <node name="joint_state_controller_spawner" pkg="controller_manager" type="controller_manager"
    args="spawn joint_state_controller" respawn="false" output="screen"/>

  <!-- start arm controller -->
  <rosparam file="$(find tm5-900-moveit_config)/config/arm_controller_vel.yaml" command="load"/>
  <node name="arm_controller_spawner" pkg="controller_manager" type="controller_manager"
    args="spawn joint_vel_controller" respawn="false" output="screen"/>
    

  <!-- <node name="rviz" pkg="rviz" type="rviz" args="-d $(find tm5-900-moveit_config)/rviz/model.rviz" /> -->
  <node name="pub_tool0_state" pkg="auo_demo" type="pub_tool0_state" output="screen"/>
  
</launch>
